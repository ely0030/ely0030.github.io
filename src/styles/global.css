/*
  The CSS in this style tag is based off of Bear Blog's default CSS.
  https://github.com/HermanMartinus/bearblog/blob/297026a877bc2ab2b3bdfbd6b9f7961c350917dd/templates/styles/blog/default.css
  License MIT: https://github.com/HermanMartinus/bearblog/blob/master/LICENSE.md
 */

/* ---  Tufte & code‑block assets  --- */
@import "/fonts/et-book.css";         /* 1️⃣ ET Book web font            */
/* @import "tufte-css/tufte.min.css";  2️⃣ base Tufte stylesheet (disabled) */
@import "./prism-tufte.css";           /* 3️⃣ pale ink Prism theme        */

/* --- Apple Design System Fonts --- */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap');


/* --- Dark mode override for Astro default code blocks --- */
pre.astro-code{
  background:#0b0d12 !important;
  color:#fff !important;
  border-left:2px solid var(--color-link);
  padding:1.2rem 1.5rem;
  overflow-x:auto;
  font-size:0.85em;
  font-family:'Source Code Pro', Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}
/* Override removed: allow individual Prism token colors to apply */
/* pre.astro-code span{color:var(--color-link) !important;} */

/* Prism token styling for default code blocks (Astro Markdown) */
pre.astro-code .token.comment,
pre.astro-code .token.prolog,
pre.astro-code .token.doctype,
pre.astro-code .token.cdata {
  color: var(--color-link);
  opacity: 0.7;
  font-style: italic;
}

pre.astro-code .token.punctuation {
  color: #88aaff;
}

pre.astro-code .token.property,
pre.astro-code .token.tag,
pre.astro-code .token.boolean,
pre.astro-code .token.number,
pre.astro-code .token.constant,
pre.astro-code .token.symbol,
pre.astro-code .token.deleted,
pre.astro-code .token.selector,
pre.astro-code .token.attr-name,
pre.astro-code .token.string,
pre.astro-code .token.char,
pre.astro-code .token.builtin,
pre.astro-code .token.inserted,
pre.astro-code .token.operator,
pre.astro-code .token.entity,
pre.astro-code .token.url,
pre.astro-code .language-css .token.string,
pre.astro-code .style .token.string,
pre.astro-code .token.atrule,
pre.astro-code .token.attr-value,
pre.astro-code .token.keyword,
pre.astro-code .token.function,
pre.astro-code .token.class-name,
pre.astro-code .token.regex,
pre.astro-code .token.important,
pre.astro-code .token.variable {
  color: var(--color-link);
}

:root {
	/* Remove previous palette */
	/* --bg-color: 255, 255, 255; */
	/* --text-color: 20, 20, 20; */
	/* --primary-color: 30, 100, 200; */
	/* --subtle-gray: 120, 120, 120; */
	/* --highlight-bg: 245, 245, 245; */

	/* New palette based on example */
	--body-background: #ffffff; /* Pure white for Apple aesthetic */
	--body-background-stanza: #faf9f7; /* Softer background for stanza */
	--body-font-color: #1d1d1f; /* Apple's subtle dark gray */
	--body-font-color-stanza: #333; /* Softer black for stanza */
	--color-link: #0066CC; /* Apple's signature blue */
	--gray-200: #f6f8fa; /* Lighter gray for backgrounds */
	--gray-500: #6e7781; /* Medium gray for subtle text/borders */

	/* Removed unused variables */
	/* --icon-filter: none; */
	/* --hint-color-info: #6bf; */
	/* --hint-color-warning: #fd6; */
	/* --hint-color-danger: #f66; */

	--box-shadow:
		0 1px 3px rgba(0, 0, 0, 0.04), 0 4px 8px rgba(0, 0, 0, 0.06); /* Subtle Apple-style shadow */
	--accent: #ff5500;
}

/* Remove previous font faces */
/* @font-face { ... } */
/* Placeholder: Add @font-face rules here if using custom webfonts like Open Sans */

/* Remove Daminga Font Faces */
/* @font-face {
  font-family: 'Daminga'; 
  src: url('/fonts/DamingaMedium_PERSONAL_USE_ONLY.otf') format('opentype'); 
  font-weight: 400; 
  font-style: normal;
  font-display: swap;
} */
@font-face {
  font-family: 'Daminga'; 
  src: url('/fonts/DamingaBold_PERSONAL_USE_ONLY.otf') format('opentype'); 
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}
/* @font-face {
  font-family: 'Daminga';
  src: url('/fonts/DamingaLight_PERSONAL_USE_ONLY.otf') format('opentype');
  font-weight: 300; 
  font-style: normal;
  font-display: swap;
} */

/* Optional: Add Open Sans or similar if desired for body */
/* @font-face {
  font-family: 'Open Sans';
  src: url('/fonts/OpenSans-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
} */

body {
	/* font-family: 'Daminga', Georgia, Times, "Times New Roman", serif; */ /* Remove Daminga */
  font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-weight: 400;
  letter-spacing: -0.022em;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* font-weight: 300; */ /* Remove Light weight default */
  font-weight: 400; /* Revert to standard weight for better readability */
	margin: 0;
	padding: 0;
	text-align: left;
	background-color: var(--body-background);
	word-wrap: break-word;
	overflow-wrap: break-word;
	color: var(--body-font-color);
	font-size: 14px; /* Adjusted base font size */
	line-height: 1.5;
	font-variant-ligatures: common-ligatures;
	/* Optionally set default link color here if needed */
	/* a { color: #0000EE; } */
}
main {
	/* Remove fixed width and centering */
	/* width: 680px; */
	/* max-width: calc(100% - 2em); */
	/* margin: auto; */
	padding: 2em 1em;
	color: var(--body-font-color); /* Use body font color */
}
h1,
h2,
h3,
h4,
h5,
h6 {
	margin: 1.5em 0 0.2rem 0;
	color: #000; /* Changed from link color to black */
	line-height: 1.2;
  font-family: inherit; /* Inherit body font */
	font-weight: 600;
}
h1 { font-size: 2.2em; margin-top: 0; font-weight: 700; }
h2 { font-size: 1.8em; font-weight: 700; text-transform: uppercase; }
h3 { font-size: 1.5em; font-weight: 700; }
h4 { font-size: 1.25em; font-weight: 600; }
h5 { font-size: 1.1em; font-weight: 600; }
h6 { font-size: 1em; color: var(--gray-500); font-style: italic; font-weight: 400; font-family: inherit; }

strong,
b {
	font-weight: 700;
}
a {
	color: var(--color-link);
	text-decoration: underline;
}
a:hover {
	color: var(--color-link);
	text-decoration: none;
}
p {
	margin-bottom: 1em;
}
.prose p {
	margin-bottom: 1.2em;
}
textarea {
	width: 100%;
	font-size: 16px;
}
input {
	font-size: 16px;
}
table {
	width: 100%;
}
img {
	max-width: 100%;
	height: auto;
	border-radius: 8px;
}
code {
	padding: 0.1em 0.3em;
  background-color: var(--gray-200); /* Use lighter gray */
	border-radius: 2px;
  font-family: Consolas, Menlo, Monaco, "Courier New", monospace;
  font-weight: 400;
	font-size: 0.85em;
}
pre {
	padding: 1em;
	border-radius: 4px;
  background-color: var(--gray-200); /* Use lighter gray */
  border: 1px solid var(--gray-500); /* Use medium gray border */
	overflow-x: auto;
}
pre > code {
	all: unset; /* Reset inline code styles */
  background-color: transparent !important;
  font-family: Consolas, Menlo, Monaco, "Courier New", monospace;
  font-weight: 400;
	font-size: 0.9em;
	line-height: 1.6;
}
blockquote {
	border-left: 4px solid var(--color-link); /* Use link color for border */
	background-color: var(--gray-200); /* Use lighter gray background */
	padding: 1em 1.5em;
	margin: 0 0 1em 0;
	font-style: normal;
	color: var(--body-font-color);
}
hr {
	border: none;
	border-top: 1px solid var(--gray-200); /* Use lighter gray */
}
@media (max-width: 720px) {
	body {
		font-size: 18px;
	}
	main {
		padding: 1em;
	}
}

.sr-only {
	border: 0;
	padding: 0;
	margin: 0;
	position: absolute !important;
	height: 1px;
	width: 1px;
	overflow: hidden;
	/* IE6, IE7 - a 0 height clip, off to the bottom right of the visible 1px box */
	clip: rect(1px 1px 1px 1px);
	/* maybe deprecated but we need to support legacy browsers */
	clip: rect(1px, 1px, 1px, 1px);
	/* modern browsers, clip-path works inwards from each corner */
	clip-path: inset(50%);
	/* added line to stop words getting smushed together (as they go onto separate lines and some screen readers do not understand line feeds as a space */
	white-space: nowrap;
}

/* Utility class for small caps (less common with sans-serif body) */
/* .small-caps { ... } */

/* Basic styling for article/section */
article {
  /* Base styling if needed */
}
section {
  margin-top: 2em;
  margin-bottom: 2em;
}

/* Large Small-Caps Header Style (Keep or Remove? Small caps less common for serif headers) */
/* .section-header-large { ... } */

/* Intro Box Style (Style like blockquote?) */
.intro-box {
  background-color: var(--gray-200);
  border-left: 4px solid var(--color-link);
  padding: 1em 1.5em;
	margin-bottom: 2em;
	border-radius: 0 4px 4px 0; /* Adjust radius */
	font-size: 0.95em;
}

/* Collapsible Section Style */
details {
  border: 1px solid var(--gray-200);
	border-radius: 4px;
	padding: 0.5em 1em;
	margin-bottom: 1em;
}

details summary {
  cursor: pointer;
  font-weight: 600;
}

details summary > * {
  display: inline; /* Allow content next to marker */
}

details[open] {
  padding-bottom: 1em;
}

details[open] summary {
  margin-bottom: 0.5em;
}

/* Remove Tufte Sidenote Styles */
/* .sidenote, .marginnote { ... } */
/* label.sidenote-number { ... } */
/* input.margin-toggle { ... } */
/* @media (max-width: 1000px) { ... } */

/* Remove Drop Cap Style */
/* .dropcap { ... } */

/* Remove Full Width Class */
/* .fullwidth { ... } */

/* Ensure fullwidth respects main padding on smaller screens */
/* @media (max-width: 680px) { 
  .fullwidth {
    margin-left: -1em; 
    margin-right: -1em;
  }
} */
/* Fullwidth might not be needed or should be simpler */

/* Layout Styles */
.layout-wrapper {
  display: grid;
  grid-template-columns: 1fr 5fr 2fr; /* Re-establish side columns (Sidebar, Main, Sidenotes) */
  grid-template-areas:
    "sidebar main sidenotes";
  gap: 2em; /* Restore or adjust gap */
  max-width: 1600px;
  margin: 0 auto;
  padding: 1.5em 0.8em 1.5em 20px; /* Match literature2 left padding for sidebar offset */
}

.sidebar {
  grid-area: sidebar;
  /* Remove explicit width, rely on grid */
  /* width: 25%; */
  /* min-width: 200px; */
  padding-right: 0; /* Remove padding, use grid gap */
  margin-top: -1.2em; /* Move links slightly higher for consistent placement */
}

/* Keep the header itself sticky for consistent viewport offset */
aside.sidebar > header.site-header {
  position: sticky;
  top: 0.5rem;
  margin-top: 0;        /* Neutralize container margin on header */
  padding-top: 0.2rem;  /* Gentle breathing room */
}

/* Index page uses body.no-transitions; remove special treatment to match blog posts */
/* Commented out to match blog post alignment
body.no-transitions .layout-wrapper {
  padding-top: 0.5rem;
}
body.no-transitions aside.sidebar {
  margin-top: 0;
}
*/

.sidebar nav.site-nav a { 
  font-size: 28px !important; /* Restore size override */
  /* Inherit color from global 'a' rule */
}

/* Adjust selector to be highly specific, remove :global() */
aside.sidebar header.site-header nav.site-nav div.internal-links a[href="/"] { 
  font-size: 36px !important; /* Restore font size */
  font-weight: bold; /* Restore bold */
}

.main-content-area {
  grid-area: main;
  /* Remove max-width constraint to fill grid area */
  /* max-width: 800px;  */ 
  margin: 0;
  /* border: 2px solid red; -- Remove red border */
}

/* Add Sidenotes Area Style */
.sidenotes-area {
  grid-area: sidenotes;
  font-size: 0.9em; /* Slightly smaller text for notes */
  color: var(--gray-500);
  line-height: 1.5;
  padding-left: 1em; /* Add some padding */
}

/* Style blog post titles on index page - Old Directory Look */
.main-content-area .post-list {
  list-style: none; /* Remove browser bullets - using custom ones */
  padding-left: 0; /* Remove padding - bullets are inline now */
  margin: 0 0 1em 0; /* Add bottom margin */
}

.main-content-area .post-list h2 {
  margin: 0;
  font-size: 1em;
  font-weight: 400;
  text-transform: none;
  line-height: inherit;
  color: inherit;
  display: inline-block;
}

.main-content-area .post-list h2 a {
  color: #0000EE; /* Classic hyperlink blue */
  text-decoration: underline; /* Ensure underline */
  font-family: 'SF Mono', Menlo, Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
  font-weight: 400;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale; /* Use monospace for directory look */
  font-size: inherit; /* Inherit size from h2 */
  font-weight: inherit; /* Inherit weight from h2 */
  text-transform: lowercase; /* Force lowercase */
}

.main-content-area .post-list h2 a:visited {
  color: #551A8B; /* Classic visited link purple */
}

.main-content-area .post-list h2 a:hover {
  text-decoration: none; /* Optional: remove underline on hover */
}

.main-content-area .post-list li {
  margin-bottom: 0.5em; /* Reduce spacing between items */
}

.main-content-area .post-list time {
		/* Removed time styles as element is gone */
}

/* (Reverted) About link uses default nav styling across pages */
/* Hide About link on literature pages (keep Home only) */
body.literature .sidebar nav.site-nav a[href="/about"] {
  display: none !important;
}

/* Literature Home link: darker tint to reduce glare */
body.literature aside.sidebar header.site-header nav.site-nav div.internal-links a[href="/"] {
  color: var(--literature-home-color, #222) !important;
}

/* Literature Home: show by default, fade away after load via body.home-hidden */
body.literature aside.sidebar header.site-header nav.site-nav a[href="/"] {
  opacity: 1;
  pointer-events: auto;
  transition: opacity 0.35s ease;
}
body.literature.home-hidden aside.sidebar header.site-header nav.site-nav a[href="/"] {
  opacity: 0;
  pointer-events: none;
}
/* Reveal on hover even when hidden */
body.literature.home-hidden aside.sidebar header.site-header:hover nav.site-nav a[href="/"] {
  opacity: 1;
  pointer-events: auto;
}

/* Literature keeps About hidden but leaves Home styling identical to index */

/* Responsive adjustments for the layout */
@media (max-width: 1000px) { 
  .layout-wrapper {
    grid-template-columns: 1fr; /* Stack columns on smaller screens */
    grid-template-areas:
      "sidebar"
      "main"
      "sidenotes"; 
    gap: 1em; /* Reduce gap for stacked layout */
    padding: 1em 0.5em; /* Reduce padding for stacked layout */
  }

  .sidebar,
  .main-content-area,
  .sidenotes-area {
    /* width: 100%; */ /* Not needed with grid */
    max-width: 100%; /* Allow full width */
    padding-right: 0;
    padding-left: 0;
    margin: 0; /* Reset margin */
  }

  .sidebar {
    margin-bottom: 0; /* Remove bottom margin, rely on gap */
  }
  .sidenotes-area {
    margin-top: 1em;
    padding-left: 0; /* Remove padding when stacked */
  }

  body {
    font-size: 18px;
  }
  main {
    padding: 1em 0; 
  }
}

/* Drop Cap Styling removed to disable automatic drop caps */

/* Sidenote Styles (Simplified Tufte-inspired) */
.sidenote,
.marginnote {
    float: right;
    clear: right;
    /* Adjust margin based on 1fr 5fr 2fr layout + gap */ 
    /* Pushes the note into the right column */
    margin-right: -45%; /* Approx. (2fr + gap) / 5fr */
    width: 40%;       /* Approx. 2fr / 5fr */
    margin-top: 0.3rem;
    margin-bottom: 1rem;
    font-family: et-book, Palatino, "palatino linotype", "palatino lt std", "book antiqua", Georgia, serif; /* Changed font stack */
    font-size: 0.85em;
    line-height: 1.4;
    vertical-align: baseline;
    position: relative;
    color: #333; /* Darker grey color for sidenote text */
}

label.sidenote-number {
    counter-increment: sidenote-counter;
}

label.sidenote-number::after,
.sidenote::before {
    content: counter(sidenote-counter); /* Removed brackets */
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji'; /* Match body font */
    vertical-align: baseline;
    position: relative;
    top: -0.3em; /* Adjust vertical alignment */
    font-size: 0.8em; /* Smaller footnote number */
    padding-left: 2px;
    color: #333; /* Match sidenote body color */
}

.sidenote::before {
    /* Removed absolute positioning */
    /* position: absolute; */
    /* top: 0; */
    /* left: -2.5em; */ 
    display: inline; /* Make number inline */
    margin-right: 0.5em; /* Space between number and text */
    color: var(--body-font-color); /* Changed from var(--color-link) */
}

input.margin-toggle {
    display: none;
}

/* Reset counter for each article */
article {
    counter-reset: sidenote-counter;
}

/* Responsive handling for sidenotes */
@media (max-width: 1000px) {
    .sidenote,
    .marginnote {
        display: block; /* Show by default when stacked */
        float: none;
        clear: none;
        margin-right: 0;
        width: 100%;
        margin-top: 1rem;
        margin-bottom: 1rem;
        font-size: 0.9em;
        line-height: 1.5;
        position: relative;
        left: 0;
        /* Basic styling for stacked notes */
        border-left: 3px solid var(--gray-200);
        padding-left: 1em;
        background-color: var(--gray-200);
        border-radius: 2px;
    }

    label.sidenote-number {
        /* Ensure number still appears inline */
    }
    
    .sidenote::before {
      display: none; /* Hide the note's number when stacked */
    }

    /* Optional: Hide/show toggle using checkbox (uncomment if needed) */
    /*
    label.margin-toggle:not(.sidenote-number) {
      display: inline;
    }
    input.margin-toggle {
        display: none;
    }
    input.margin-toggle:checked + .sidenote,
    input.margin-toggle:checked + .marginnote {
      display: block;
    }
     .sidenote, .marginnote {
       display: none;
     }
    */
}

/* Target headings specifically within article content */
.prose h1,
.prose h2,
.prose h3,
.prose h4,
.prose h5,
.prose h6 {
	margin: 1.5em 0 0.2rem 0;
	color: #000; /* Ensure black color */
	line-height: 1.2;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji'; /* Match body/Home link font */
	font-weight: 700; /* Ensure bold weight */
}
/* Keep global heading sizes/styles if needed, or adjust */
/* h1 { font-size: 2.2em; margin-top: 0; font-weight: 700; } */
/* h2 { font-size: 1.8em; font-weight: 700; text-transform: uppercase; } */
/* ... etc ... */

/* Reset global heading rule if prose rule handles it */
/* 
h1,
h2,
h3,
h4,
h5,
h6 {
	margin: 1.5em 0 0.5rem 0;
	color: #000; 
	line-height: 1.2;
  font-family: inherit; 
	font-weight: 600;
}
*/

/* Disable hover effect for specific nav links */
nav.site-nav .internal-links a[href="/"]:hover,
nav.site-nav .internal-links a[href="/about"]:hover {
  text-decoration: none; /* Keep text decoration as it is */
  /* You might need to set the color explicitly if it changes on hover */
  /* color: var(--color-link); /* Or the original color */
}

/* Tufte-inspired article enhancements */
.prose {
  /* Improve text measure for readability (65-75 characters per line) */
  max-width: 45rem;
  margin: 0 auto;
  /* Enhance typography */
  font-size: 16px; /* Standard base size for readability */
  line-height: 1.6; /* Improved line height for better readability */
  /* Add subtle hanging punctuation for quotes */
  hanging-punctuation: first;
}

/* Improve paragraph spacing for better rhythm */
.prose p {
  margin-bottom: 1.2em; /* Reduced paragraph spacing */
  hyphens: auto; /* Add hyphenation for better text flow */
}

/* Subtle lead-in paragraph style */
.prose p:first-of-type {
  /* Do not upscale the very first paragraph – this felt heavy on posts without headings */
  font-size: inherit;
  line-height: 1.6;
  margin-bottom: 1.5em;
}

/* Enhanced blockquote styling */
.prose blockquote {
  border-left: 2px solid var(--color-link); /* Thinner, more elegant border */
  background-color: transparent; /* Remove background for cleaner look */
  padding: 0.2em 0 0.2em 1.5em; /* Less padding top/bottom, more left */
  margin: 2em 0 2em 1em; /* Better margins */
  font-style: italic; /* Subtle italics for quotes */
  color: rgba(0, 0, 0, 0.7); /* Slightly muted text */
}

/* Enhanced sidenote styling */
.sidenote, .marginnote {
  font-size: 0.8em;
  line-height: 1.5;
  color: rgba(0, 0, 0, 0.65); /* More subtle color */
  /* Subtle styling */
  background-color: transparent;
  border-left: none;
}

/* Improved headings for better hierarchy */
.prose h2 {
  font-size: 1.6em;
  margin-top: 1.8em; /* Reduced space before H2 */
  margin-bottom: 0.2rem; /* Match general heading bottom margin */
  text-transform: none; /* Remove uppercase for more Tufte-like style */
  letter-spacing: -0.01em; /* Tighter kerning */
}

.prose h3 {
  font-size: 1.3em;
  margin-top: 1.5em; /* Reduced space before H3 */
  margin-bottom: 0.2rem; /* Match general heading bottom margin */
  letter-spacing: -0.01em;
}

/* Style figures and captions */
figure {
  margin: 2em 0;
  text-align: center;
}

figcaption {
  font-size: 0.85em;
  line-height: 1.4;
  color: rgba(0, 0, 0, 0.65);
  text-align: center;
  margin-top: 0.7em;
  font-style: italic;
}

/* Subtle horizontal rule */
.prose hr {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  margin: 2.5em auto;
  width: 40%;
}

/* Enhance small caps for section breaks or special text */
.small-caps {
  font-variant: small-caps;
  letter-spacing: 0.05em;
}

/* Enhance links in prose with subtle underline */
.prose a {
  text-decoration: none;
  border-bottom: 1px solid rgba(0, 85, 187, 0.3);
  transition: border-color 0.2s ease;
}

.prose a:hover {
  border-bottom: 1px solid rgba(0, 85, 187, 0.7);
}

/* Literature-specific link styling: softer, typographic underlines */
body.literature .prose a {
  color: #0647b9;
  border-bottom: none;
  text-decoration: underline;
  text-decoration-thickness: 0.06em;
  text-underline-offset: 2px;
  text-decoration-color: rgba(6, 71, 185, 0.55);
  transition: text-decoration-color 0.2s ease, color 0.2s ease;
}
body.literature .prose a:hover {
  color: #003f9e;
  text-decoration-color: rgba(0, 63, 158, 0.8);
}
body.literature .prose a:visited {
  color: #4a70a8;
  text-decoration-color: rgba(74, 112, 168, 0.55);
}

/* Subtle table styling */
.prose table {
  border-collapse: collapse;
  margin: 2em 0;
  font-size: 0.9em;
  width: 100%;
}

.prose table th {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding: 0.5em;
  text-align: left;
  font-weight: 600;
}

.prose table td {
  padding: 0.5em;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

/* More sophisticated Tufte-inspired enhancements */

/* Pull quotes for highlighting important text */
.pull-quote {
  float: right;
  width: 45%;
  padding: 0;
  margin: 0.5em -48% 1.5em 1em;
  font-size: 1.1em;
  line-height: 1.4;
  text-align: left;
  font-style: italic;
  color: rgba(0, 0, 0, 0.7);
  border-left: none;
  position: relative;
}

/* Add subtle left border to pull quotes */
.pull-quote:before {
  content: "";
  position: absolute;
  top: 0.2em;
  bottom: 0.2em;
  left: -1.5em;
  width: 1px;
  background-color: rgba(0, 0, 0, 0.1);
}

/* Enhanced code blocks with syntax highlighting colors */
.prose pre {
  background-color: rgba(246, 248, 250, 0.8); /* Even lighter gray */
  border: none;
  border-left: 2px solid var(--color-link);
  border-radius: 0;
  font-size: 0.85em;
  padding: 1.2em 1.4em;
  margin: 1.5em 0;
}

/* Refine inline code style */
.prose code:not(pre > code) {
  color: rgba(0, 0, 0, 0.75);
  background-color: rgba(246, 248, 250, 0.5);
  padding: 0.1em 0.4em;
  border-radius: 3px;
  font-size: 0.85em;
  font-weight: 400;
}

/* Refined image treatment */
.prose img {
  display: block;
  margin: 2em auto;
  max-width: 100%;
  height: auto;
}

/* Full-bleed image option */
.full-bleed {
  width: 100vw;
  margin-left: 50%;
  transform: translateX(-50%);
  max-width: none;
}

/* Add caption styling */
.caption {
  font-size: 0.85em;
  text-align: center;
  color: rgba(0, 0, 0, 0.65);
  padding-top: 0.5em;
  font-style: italic;
}

/* Enhance footnote styling */
.footnote {
  font-size: 0.85em;
  line-height: 1.5;
  margin: 2em 0;
  padding-top: 1em;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.footnote-item {
  margin-bottom: 0.5em;
  padding-left: 1.5em;
  position: relative;
}

.footnote-num {
  position: absolute;
  left: 0;
  top: 0;
  font-size: 0.8em;
  line-height: 1.8;
  color: var(--color-link);
}

/* Refined link styling with subtle animation */
.prose a {
  text-decoration: none;
  background-image: linear-gradient(transparent calc(100% - 1px), rgba(0, 85, 187, 0.3) 1px);
  background-size: 0% 100%;
  background-repeat: no-repeat;
  background-position: 0 0;
  border-bottom: 1px solid rgba(0, 85, 187, 0.3);
  transition: background-size 0.3s ease;
}

.prose a:hover {
  border-bottom-color: transparent;
  background-size: 100% 100%;
}

/* Refined lists with subtle spacing */
.prose ul, .prose ol {
  padding-left: 1.8em;
  margin: 0.5em 0 1em; /* Reduced from 1em 0 1.5em */
}

.prose li {
  margin-bottom: 0.3em; /* Reduced from 0.5em */
  position: relative;
}

.prose li::marker {
  color: rgba(0, 0, 0, 0.6);
}

/* Remove the conflicting rule - handled by the rule below */

/* Reduce spacing when lists directly follow headings */
.prose h1 + ul, .prose h2 + ul, .prose h3 + ul, .prose h4 + ul, .prose h5 + ul, .prose h6 + ul,
.prose h1 + ol, .prose h2 + ol, .prose h3 + ol, .prose h4 + ol, .prose h5 + ol, .prose h6 + ol,
h1 + ul, h2 + ul, h3 + ul, h4 + ul, h5 + ul, h6 + ul,
h1 + ol, h2 + ol, h3 + ol, h4 + ol, h5 + ol, h6 + ol {
  margin-top: 0.25em !important;
}

/* Reduce spacing when paragraphs directly follow headings */
.prose h1 + p, .prose h2 + p, .prose h3 + p, .prose h4 + p, .prose h5 + p, .prose h6 + p,
h1 + p, h2 + p, h3 + p, h4 + p, h5 + p, h6 + p {
  margin-top: 0.25em !important;
}

/* Reduce spacing when lists follow paragraphs */
.prose p + ul, .prose p + ol,
p + ul, p + ol {
  margin-top: 0 !important;
  padding-top: 0 !important;
}

/* Add optional epigraph styling (quote at beginning of article) */
.epigraph {
  margin: 2em 0 3em 2em;
  font-style: italic;
  color: rgba(0, 0, 0, 0.7);
}

.epigraph footer {
  text-align: right;
  font-style: normal;
  margin-top: 0.5em;
  font-size: 0.9em;
}

/* Add margin notes that work with the sidenote system */
.margin-note {
  background-color: transparent;
  padding: 0;
  border-left: none;
  font-style: normal;
}

/* Add elegant drop cap option that can be toggled */
.has-dropcap:first-letter {
  float: left;
  font-size: 5em;
  line-height: 0.65;
  margin: 0.1em 0.1em 0 0;
  color: #000;
  font-weight: bold;
}

/* Add subtle scroll behavior */
html {
  scroll-behavior: smooth;
}

/* Focus styles for accessibility */
a:focus, button:focus, input:focus, textarea:focus {
  outline: 2px solid rgba(0, 85, 187, 0.5);
  outline-offset: 2px;
}

/* Keyline style for visual separation when needed */
.keyline {
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding-bottom: 2em;
  margin-bottom: 2em;
}

/* Tufte-inspired section marker */
.section-mark {
  text-align: center;
  margin: 2em 0;
}

.section-mark:after {
  content: "* * *";
  display: inline-block;
  font-size: 1.5em;
  letter-spacing: 0.5em;
  color: rgba(0, 0, 0, 0.4);
}

/* Tufte-inspired image positioning system */

/* Base figure styling */
.figure {
  margin: 1.5em 0;
  position: relative;
  max-width: 100%;
}

/* Caption styling */
.figure-caption {
  font-size: 0.85em;
  color: var(--gray-500);
  text-align: left;
  margin-top: 1em;
  line-height: 1.3;
}

/* Right-aligned figure with text wrap */
.figure-right {
  float: right;
  margin: 0.3em 0 1em 1.5em;
  width: 35%; /* Tufte-like proportion */
  max-width: 300px;
}

/* Left-aligned figure with text wrap */
.figure-left {
  float: left;
  margin: 0.3em 1.5em 1em 0;
  width: 35%; /* Tufte-like proportion */
  max-width: 300px;
}

/* Center-right figure with text wrap (Tufte-inspired) */
.figure-mid-right {
  float: right;
  margin: 0.3em -10% 1em 1.5em; /* Negative right margin pushes into margin area */
  width: 50%;
  max-width: 400px;
}

/* Center-left figure with text wrap (Tufte-inspired) */
.figure-mid-left {
  float: left;
  margin: 0.3em 1.5em 1em -10%; /* Negative left margin pushes into margin area */
  width: 50%;
  max-width: 400px;
}

/* Centered figure with no wrap */
.figure-center {
  display: block;
  margin: 2em auto;
  width: 65%;
  max-width: 500px;
}

/* Full-width figure (edge to edge) */
.figure-full {
  width: 100%;
  margin: 2em 0;
}

/* Margin figure (true Tufte style) */
.figure-margin {
  float: right;
  width: 30%;
  max-width: 250px;
  margin: 0.3em -45% 1em 1em; /* Pushes into margin area */
  clear: right;
}

/* Ensure images fill their container */
.figure img {
  width: 100%;
  height: auto;
  display: block;
  border-radius: 2px;
  margin-bottom: 0.2em; /* Added to reduce space below image */
}

/* Clearfix for floating elements */
.clearfix::after {
  content: "";
  display: table;
  clear: both;
}

/* Add subtle border option */
.figure-bordered img {
  border: 1px solid rgba(0, 0, 0, 0.1);
}

/* Add subtle shadow option */
.figure-shadow img {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .figure-margin,
  .figure-mid-right,
  .figure-mid-left {
    float: right;
    width: 40%;
    margin: 0.3em 0 1em 1em;
    max-width: 300px;
  }
  
  .figure-center {
    width: 85%;
  }
}

@media (max-width: 500px) {
  .figure-margin,
  .figure-right,
  .figure-left,
  .figure-mid-right,
  .figure-mid-left,
  .figure-center {
    float: none;
    width: 100%;
    margin: 1.5em 0;
    max-width: none;
  }
}

/* Marks before each post title */
.post-item {
  margin-bottom: 0.5rem;
  display: flex;
  align-items: baseline;
}
/* Visual post markers */
.mark {
  /* Smaller, footnote-like symbol */
  display: inline;
  font-size: 0.9em;
  margin-right: 0.1em;
  vertical-align: baseline; /* align with text baseline */
}
.mark-grey {
  color: grey;
}
.mark-orange {
  color: orange;
}
.mark-blue {
  color: blue;
}

/* Restore default bullet marker before each post-item */
.post-item::before {
  content: '•';
  margin-right: 0.5em;
  color: #333;
  font-weight: bold;
  font-size: 1.1em;
}

/* Add layout‑specific overrides */
body.magazine .prose {
  font-size: 15px;
  line-height: 1.6;
  max-width: 45rem; /* Restore original prose width */
}

body.magazine {
  font-weight: 500; /* Restore original thicker weight */
}

body.magazine .prose p {
  margin-bottom: 1.5em;
}

/* Restore first paragraph styling for magazine layout */
body.magazine .prose p:first-of-type {
  font-size: 1.1em;
  line-height: 1.5;
  margin-bottom: 1.8em;
}

body.magazine .prose h2 {
  margin-top: 2.5em;
}

body.magazine .prose h3 {
  margin-top: 2em;
}

body.blog .prose {
  /* Refined blog styles for readability */
  line-height: 1.65;   /* More generous line height for comfort */
  font-size: 17px;     /* Keep slightly larger size */
  font-weight: 400;    /* Revert to standard weight (450 felt a bit heavy) */
  letter-spacing: normal; /* Revert letter spacing */
  max-width: 40rem;    /* Slightly wider measure, still comfortable */
  padding-block: 1.5rem; /* Restore some vertical padding */
  padding-inline: 1rem; /* Restore some horizontal padding */
  text-rendering: optimizeLegibility;
  font-feature-settings: "liga" 1, "kern" 1;
  color: rgba(0, 0, 0, 0.88); /* Slightly softer black for less strain */
  font-family: 'SF Mono', Menlo, Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
  font-weight: 400;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* Removed font smoothing for consistent Windows/Mac rendering */
  /* -webkit-font-smoothing: antialiased; */
  /* -moz-osx-font-smoothing: grayscale; */
}

/* Tighter paragraph spacing for blog style - Increased margin */
body.blog .prose p {
  margin-bottom: 1.4em; /* More space between paragraphs */
}

/* Enhance code blocks to match Obsidian style - Revert for consistency */
body.blog .prose code:not(pre > code) {
  font-family: Consolas, Menlo, Monaco, "Courier New", monospace; /* Revert to global code font */
  font-size: 0.85em; /* Revert size */
  background-color: var(--gray-200); /* Revert background */
  border-radius: 2px;
  padding: 0.1em 0.3em; /* Revert padding */
  font-weight: 400;
}

/* Adjust blockquotes - Revert for consistency */
body.blog .prose blockquote {
  border-left: 2px solid var(--color-link); /* Revert to original style */
  background-color: transparent;
  padding: 0.2em 0 0.2em 1.5em;
  margin: 2em 0 2em 1em;
  font-style: italic;
  color: rgba(0, 0, 0, 0.7);
}

/* Improve list styling - Consistent with reduced spacing */
body.blog .prose ul, 
body.blog .prose ol {
  padding-left: 1.8em;
  margin: 0.5em 0 1em; /* Match general .prose list spacing */
}

body.blog .prose li {
  margin-bottom: 0.3em; /* Match general .prose list item spacing */
}

/* Further reduce top margin when lists follow paragraphs in blog */
body.blog .prose p + ul, 
body.blog .prose p + ol {
  margin-top: 0.3em;
}

/* Match heading styles - Restore more generous spacing */
body.blog .prose h1, 
body.blog .prose h2, 
body.blog .prose h3, 
body.blog .prose h4 {
  font-weight: 700; /* Restore original bolder headings */
  margin-top: 1.8em; /* Restore more top margin */
  margin-bottom: 0.7em; /* Restore more bottom margin */
}
body.blog .prose h3 { 
  margin-top: 1.5em; 
  margin-bottom: 0.6em; 
}

/* Compact reading mode (toggle) */
body.blog.compact .prose p + p {
  text-indent: 1.25rem;
  margin-top: 0;
}
body.blog.compact .prose p {
  margin-bottom: 0;
}

/* Enhanced heading tracker styling */
.heading-tracker {
  position: fixed;
  top: 30%;
  left: 1rem;
  transform: translateY(-50%);
  z-index: 5;
  margin: 0;
}
.heading-tracker ul {
  list-style: none;
  margin: 0;
  padding: 0;
}
.heading-tracker a {
  display: block;
  font-size: 1rem;
  font-weight: 400;
  color: var(--color-link);
  text-decoration: none;
  margin-bottom: 0.75em;
  padding-left: 0.5em;
  border-left: 3px solid transparent;
  transition: color 0.2s, border-color 0.2s;
}
.heading-tracker a:hover,
.heading-tracker a.active {
  font-weight: 600;
  color: var(--color-link);
  border-color: var(--color-link);
}

body.stanza .prose {
  max-width: 52rem;
  margin: auto;
  padding: 2.5rem 1.25rem;
  font-family: 'Ivar Text', Georgia, serif;
  font-size: 1.05rem;
  line-height: 1.6;
  color: #1d1d1d;
  background: #fafafa;
}
body.stanza .prose p {
  margin: 0 0 1em;
}
body.stanza .prose p.stanza {
  margin: 1.8em 0 0.2em;
}
body.stanza aside.note {
  font-style: italic;
  opacity: .8;
  margin: 1.2em 0;
  padding-left: 1em;
  border-left: 2px solid var(--accent, #ff5500);
}
body.stanza .pull {
  font-size: 1.25rem;
  font-weight: 600;
  line-height: 1.4;
  color: var(--accent, #ff5500);
}
@media (min-width: 48em) {
  body.stanza .pull { float: right; width: 40%; margin: 0 0 1em 1.5em; }
}

body.stanza .layout-wrapper {
  display: grid; /* Use standard three-column grid for consistent nav position */
  grid-template-columns: 1fr 5fr 2fr;
  grid-template-areas: "sidebar main sidenotes";
  gap: 2em;
  max-width: none;       /* Align with literature2/index style */
  margin: 0;
  padding: 1.5em 0 30px 20px; /* Consistent left offset for nav */
}
/* Keep sidenotes hidden on stanza, but retain sidebar for nav */
body.stanza .sidenotes-area,
body.stanza #toggle-compact {
  display: none !important;
}
body.stanza .main-content-area {
  margin: 0;
}

body.stanza progress.reading {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 3px;
  background: rgba(0,0,0,.08);
  z-index: 9999;
}
body.stanza progress.reading::-webkit-progress-value { background: var(--accent); }
body.stanza progress.reading::-moz-progress-bar { background: var(--accent); }

/* Pull Quotes for Stanza */
body.stanza .pull {
  font-size: 1.15em; /* Slightly larger than body */
  font-weight: 600;
  line-height: 1.4;
  color: var(--accent, #ff5500);
  display: block; /* Default block on mobile */
  margin: 1.5em 0;
}

@media (min-width: 60em) { /* Adjust breakpoint as needed */
  body.stanza .pull {
    float: right;
    width: 35%; /* Adjust width */
    margin: 0.5em -5% 1em 1.5em; /* Negative margin pulls into gutter */
    text-align: left;
  }
}

/* Stanza Specific Heading Styles */
body.stanza .prose h1,
body.stanza .prose h2,
body.stanza .prose h3,
body.stanza .prose h4,
body.stanza .prose h5,
body.stanza .prose h6 {
  font-family: 'SF Mono', Menlo, Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
  font-weight: 400;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-weight: 600; /* Semi-bold */
  color: var(--body-font-color-stanza);
  /* Keep general H sizes or override if needed */
}

/* Quiet Header for Stanza */
body.stanza .layout-wrapper > aside.sidebar > header.site-header {
  padding-bottom: 0.5rem; /* Reduce bottom padding */
  margin-bottom: 0; /* Remove margin */
}
body.stanza .layout-wrapper > aside.sidebar > header.site-header nav.site-nav a {
  font-size: 1rem !important; /* Smaller nav links */
  padding: 0.2rem 0;
}
body.stanza .layout-wrapper > aside.sidebar > header.site-header nav.site-nav div.internal-links a[href="/"] {
  font-size: 1.5rem !important; /* Smaller main title */
}

/* Reading Progress Bar */
body.stanza progress.reading {
  transition: width 0.1s linear; /* Add transition for animation */
}
body.stanza progress.reading::-webkit-progress-value { background: var(--accent); }
body.stanza progress.reading::-moz-progress-bar { background: var(--accent); }

/* Respect Reduced Motion for Progress Bar */
@media (prefers-reduced-motion: reduce) {
  body.stanza progress.reading {
    transition: none;
  }
}

/* LITERATURE PAGE TYPE - Beautiful minimal essay layout */
:root {
  --literature-font-size: 15px;
  --literature-line-height: 1.3;      /* standard literature1 */
  --literature-max-width: 560px;
  --literature-padding: 20px;
  --literature-paragraph-spacing: 0.7em; /* standard literature1 */
  --literature-text-color: #0d0d0d;
  --literature-bg-color: #ffffff;
}

body.literature {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', 'Arial', sans-serif;
  background: var(--literature-bg-color);
  color: var(--literature-text-color);
  /* Font smoothing removed for cross-platform consistency */
  text-rendering: optimizeLegibility;
  --literature-home-color: #222;
  --literature-top-padding: 0px;    /* adjustable top padding for alignment */
  --literature-h1-offset: -10px;    /* adjustable h1 top margin */
  --literature-left-gutter: 4px;    /* adjustable left gutter on desktop */
  --literature-anchor-offset: 40px; /* distance of anchor marker from text */
}

body.literature .layout-wrapper {
  max-width: none;
  margin: 0;
  padding: var(--literature-top-padding) 0 30px 20px; /* adjustable top alignment */
}

/* Immersive mode: hide site chrome and center text, Obsidian-like focus */
body.literature.immersive .sidebar,
body.literature.immersive .sidenotes-area,
body.literature.immersive #toggle-compact,
body.literature.editor-immersive .sidebar,
body.literature.editor-immersive .sidenotes-area,
body.literature.editor-immersive #toggle-compact {
  display: none !important;
}
body.literature.immersive .layout-wrapper,
body.literature.editor-immersive .layout-wrapper {
  grid-template-columns: 1fr;
  grid-template-areas: "main";
  max-width: none;
  margin: 0;
  padding: 2rem 0; /* remove left offset */
}
body.literature.immersive .main-content-area,
body.literature.editor-immersive .main-content-area { margin: 0 auto; }
/* Slightly wider, softer default measure in immersive mode */
body.literature.immersive { --literature-max-width: 560px; }
/* Hide heading hash anchors for uncluttered look */
body.literature.immersive .prose h1::before,
body.literature.immersive .prose h2::before,
body.literature.immersive .prose h3::before,
body.literature.immersive .prose h4::before,
body.literature.immersive .prose h5::before,
body.literature.immersive .prose h6::before {
  display: none !important;
}

body.literature .prose {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', 'Arial', sans-serif;
  font-size: var(--literature-font-size);
  line-height: var(--literature-line-height);
  color: var(--literature-text-color);
  max-width: var(--literature-max-width);
  text-align: left;
  letter-spacing: -0.003em;
  margin: 0 auto; /* center the text column */
  font-weight: 400;
  /* Avoid forcing pre-line globally; rely on explicit <br> and inserted spacing */
  white-space: normal;
  padding-top: 0; /* Align first heading with Home link */
  padding-bottom: 28px;
}

/* Literature: center defaults for anchor/gutter */
body.literature {
  --literature-left-gutter: 4px;
  --literature-anchor-offset: 40px;
}

/* Strict spacing: preserve user's exact spacing (optional per-post) */
body.literature.strict-spacing .prose {
  white-space: pre-wrap; /* preserve spaces and line breaks */
}
body.literature.strict-spacing .prose p + p {
  margin-top: 0 !important; /* remove paragraph margin to avoid double spacing */
}

body.literature .prose p {
  margin: 0 !important; /* Override default .prose p margins */
  margin-bottom: 0 !important; /* Specifically override margin-bottom */
  padding: 0 !important;
  font-size: var(--literature-font-size);
  line-height: var(--literature-line-height);
  hanging-punctuation: first last;
  hyphens: auto;
}

/* Add paragraph spacing in literature pages */
body.literature .prose p + p {
  margin-top: var(--literature-paragraph-spacing) !important;
}

/* Slight breathing room when lists follow paragraphs in literature */
body.literature .prose p + ul,
body.literature .prose p + ol {
  margin-top: 0.4em !important;
}

/* Override first paragraph styles too */
body.literature .prose p:first-of-type,
body.literature .prose p:first-child {
  margin: 0 !important;
  margin-bottom: 0 !important;
}

/* Make empty paragraphs visible to preserve multiple line breaks */
body.literature .prose p:empty {
  height: var(--literature-paragraph-spacing);
  margin: 0;
}

/* Ensure empty paragraphs have content for proper height */
body.literature .prose p:empty::before {
  content: '\00a0'; /* non-breaking space */
  line-height: inherit;
}

/* No extra spacing for br tags - just a line break */
body.literature .prose br,
body.literature .prose p br {
  /* Let <br> behave as a pure line-break for exact newline mapping */
  display: inline !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* Title styling - left-aligned */
body.literature .prose h1 {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', 'Arial', sans-serif;
  font-weight: 600; /* match Home weight */
  font-size: 24px;
  line-height: 1.2;
  color: var(--literature-home-color, #222); /* match Home tint */
  margin: var(--literature-h1-offset) 0 8px 0; /* adjustable heading offset */
  text-align: left;
  letter-spacing: 0;
  position: relative;
}

/* Literature heading rhythm + positioning for anchor markers */
body.literature .prose h2,
body.literature .prose h3,
body.literature .prose h4,
body.literature .prose h5,
body.literature .prose h6 {
  position: relative;
}

/* Balance top headings for nicer line breaks */
body.literature .prose h1,
body.literature .prose h2 {
  text-wrap: balance;
}
/* Improve paragraph line wrapping */
body.literature .prose p { text-wrap: pretty; }

body.literature .prose h2 { font-size: 18px; font-weight: 500; margin: 1.2em 0 0.25em; letter-spacing: 0; text-transform: none; }
body.literature .prose h3 { font-size: 16px; font-weight: 500; margin: 1em 0 0.25em; letter-spacing: 0; }
body.literature .prose h4 { font-size: 15px; font-weight: 500; margin: 0.9em 0 0.25em; letter-spacing: 0; }
body.literature .prose h5 { font-size: 14px; font-weight: 600; margin: 0.8em 0 0.2em;  letter-spacing: 0; }
body.literature .prose h6 { font-size: 13px; font-weight: 600; margin: 0.8em 0 0.2em;  letter-spacing: 0; }

/* Heading hash indicators with size variation */
/* Literature heading anchor marker — subtle pilcrow on hover only */
body.literature .prose h1::before,
body.literature .prose h2::before,
body.literature .prose h3::before,
body.literature .prose h4::before,
body.literature .prose h5::before,
body.literature .prose h6::before {
  content: '\00B6'; /* pilcrow */
  position: absolute;
  left: calc(-1 * var(--literature-anchor-offset));
  top: 50%;
  transform: translateY(-50%);
  color: #999;
  font-weight: 400;
  font-size: 14px;
  line-height: 1;
  opacity: 0;             /* hidden by default */
  transition: opacity 0.15s ease;
  cursor: pointer;
  padding: 0 5px;
}
body.literature .prose h1:hover::before,
body.literature .prose h2:hover::before,
body.literature .prose h3:hover::before,
body.literature .prose h4:hover::before,
body.literature .prose h5:hover::before,
body.literature .prose h6:hover::before {
  opacity: 0.45; /* appear only on hover */
}

/* Blue on hover */
/* Keep hover color neutral for literature */
body.literature .prose h1:hover::before,
body.literature .prose h2:hover::before,
body.literature .prose h3:hover::before,
body.literature .prose h4:hover::before,
body.literature .prose h5:hover::before,
body.literature .prose h6:hover::before {
  color: #999;
}


/* Bold hash when heading has :target (scrolled to via anchor link) */
body.literature .prose h1:target::before,
body.literature .prose h2:target::before,
body.literature .prose h3:target::before,
body.literature .prose h4:target::before,
body.literature .prose h5:target::before,
body.literature .prose h6:target::before {
  font-weight: 700;
  color: #4a70a8;
  opacity: 1; /* ensure visible when targeted */
}

/* Disable heading markers entirely on literature */
body.literature .prose h1::before,
body.literature .prose h2::before,
body.literature .prose h3::before,
body.literature .prose h4::before,
body.literature .prose h5::before,
body.literature .prose h6::before { display: none !important; content: none !important; }

/* Grey hash for active heading (current scroll position) - no color change */
body.literature .prose h1.active-heading::before,
body.literature .prose h2.active-heading::before,
body.literature .prose h3.active-heading::before,
body.literature .prose h4.active-heading::before,
body.literature .prose h5.active-heading::before,
body.literature .prose h6.active-heading::before {
  color: #999;
}

/* Subtitle/date styling */
body.literature .prose .subtitle,
body.literature time {
  display: block;
  text-align: left;
  font-size: 12px;
  color: #666;
  margin-bottom: 16px;
  font-style: normal;
}

/* Section headings */
body.literature .prose h2 {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', 'Arial', sans-serif;
  font-weight: 500;
  font-size: 20px;
  line-height: 1.3;
  color: var(--literature-text-color);
  margin: 1.5em 0 0.5em 0;
  letter-spacing: 0;
  position: relative;
}

body.literature .prose h3,
body.literature .prose h4,
body.literature .prose h5,
body.literature .prose h6 {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', 'Arial', sans-serif;
  font-weight: 500;
  font-size: 18px;
  line-height: 1.3;
  color: var(--literature-text-color);
  margin: 1.2em 0 0.4em 0;
  position: relative;
}

/* Links - minimal like literature.bio */
body.literature .prose a {
  color: #0000EE;
  text-decoration: none;
}

body.literature .prose a:hover {
  text-decoration: underline;
}

/* Back to blog button */
body.literature .back-to-blog {
  display: inline-block;
  margin-bottom: 24px;
  color: #0066cc;
  font-size: 14px;
  text-decoration: none;
  transition: color 0.2s ease;
}

body.literature .back-to-blog:hover {
  color: #0052a3;
  text-decoration: none;
}

/* Hide unnecessary elements for literature style */
body.literature .sidenotes-area,
body.literature #toggle-compact,
body.literature .reading-mode-toggle {
  display: none !important;
}

body.literature .main-content-area {
  margin: 0 auto;           /* center the main column */
  padding: 0;
  max-width: none;
  display: flex;
  justify-content: center;  /* center inner article */
}

body.literature main {
  margin: 0;
  padding: 0;
}

/* Code styling - minimal and clean */
body.literature .prose code {
  font-family: 'SF Mono', Monaco, 'Inconsolata', 'Fira Code', monospace;
  font-size: 0.85em;
  background: #f5f5f5;
  padding: 0.2em 0.4em;
  border-radius: 3px;
}

body.literature .prose pre {
  font-family: 'SF Mono', Monaco, 'Inconsolata', 'Fira Code', monospace;
  font-size: 0.85em;
  background: #f8f8f8;
  border: 1px solid #e8e8e8;
  border-radius: 4px;
  padding: 1.5em;
  overflow-x: auto;
  margin: 2em 0;
}

body.literature .prose pre code {
  background: none;
  padding: 0;
}

/* Blockquotes - minimal */
body.literature .prose blockquote {
  border-left: 2px solid #ccc;
  margin: 1em 0;
  padding: 0 0 0 1em;
  font-style: normal;
  color: var(--literature-text-color);
}

/* Subtle back link at top of literature articles */
body.literature .prose .back-to-blog {
  display: inline-block;
  margin-bottom: 12px;
  color: #6e7781;
  text-decoration: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.15);
}
body.literature .prose .back-to-blog:hover {
  color: #000;
  border-bottom-color: rgba(0, 0, 0, 0.35);
}
/* Hide back link in immersive mode to reduce chrome */
body.literature.immersive .prose .back-to-blog { display: none; }

/* Lists - compact */
body.literature .prose ul,
body.literature .prose ol {
  margin: 0.8em 0;
  padding-left: 1.2em;
}
/* Task list cleanup */
body.literature .prose ul.contains-task-list,
body.literature .prose ol.contains-task-list {
  list-style: none;
  padding-left: 0;
}
body.literature .prose ul.contains-task-list li,
body.literature .prose ol.contains-task-list li {
  display: flex;
  align-items: flex-start;
  gap: 0.5em;
}
body.literature .prose ul.contains-task-list input[type="checkbox"],
body.literature .prose ol.contains-task-list input[type="checkbox"] {
  margin-top: 0.2em;
}

body.literature .prose li {
  margin-bottom: 0.2em;
}

/* Lists directly after headings should sit closer */
body.literature .prose h1 + ul,
body.literature .prose h2 + ul,
body.literature .prose h3 + ul,
body.literature .prose h4 + ul,
body.literature .prose h5 + ul,
body.literature .prose h6 + ul,
body.literature .prose h1 + ol,
body.literature .prose h2 + ol,
body.literature .prose h3 + ol,
body.literature .prose h4 + ol,
body.literature .prose h5 + ol,
body.literature .prose h6 + ol {
  margin-top: 0.25em;
}
/* Paragraph → task list specifically */
body.literature .prose p + ul.contains-task-list,
body.literature .prose p + ol.contains-task-list {
  margin-top: 0.4em !important;
}

/* Images: minimal look and clean spacing */
body.literature .prose img {
  display: block;
  margin: 1em 0;
  border-radius: 0;
}

/* Tables: prevent overflow on narrow measure */
body.literature .prose table {
  display: block;
  width: max-content;
  max-width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

/* Comfortable anchor scroll positioning */
body.literature .prose h1,
body.literature .prose h2,
body.literature .prose h3,
body.literature .prose h4,
body.literature .prose h5,
body.literature .prose h6 {
  scroll-margin-top: 20px;
}

/* Subtle active-heading style from scroll spy */
body.literature .prose .active-heading {
  color: #111;
}

/* Remove compact toggle on literature pages */
body.literature #toggle-compact {
  display: none !important;
}

/* Prevent hash markers from overflowing on small screens */
@media (max-width: 720px) {
  body.literature .prose h1::before,
  body.literature .prose h2::before,
  body.literature .prose h3::before,
  body.literature .prose h4::before,
  body.literature .prose h5::before,
  body.literature .prose h6::before {
    display: none;
  }
}

/* Provide a small left gutter when anchor markers are visible */
@media (min-width: 721px) {
  body.literature .prose { padding-left: 0; }
}

/* Disable mid-margin figure push on narrow measure to prevent overflow */
body.literature .figure-mid-right,
body.literature .figure-mid-left {
  margin: 0.3em 0 1em 1.5em !important;
  width: 45% !important;
  max-width: 280px !important;
}

/* LITERATURE2 PAGE TYPE - Similar to literature but with different settings */
:root {
  --literature2-font-size: 15px;
  --literature2-line-height: 1.3;
  --literature2-max-width: 660px;
  --literature2-padding: 20px;
  --literature2-paragraph-spacing: 0.9em;
  --literature2-text-color: #000000;
  --literature2-bg-color: #ffffff;
}

body.literature2 {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', 'Arial', sans-serif;
  background: var(--literature2-bg-color);
  color: var(--literature2-text-color);
  /* Font smoothing removed for cross-platform consistency */
  text-rendering: optimizeLegibility;
}

/* Literature2 retains full-width, left-aligned container */
body.literature2 .layout-wrapper {
  max-width: none;
  margin: 0;
  padding: 1.5em 0 30px var(--literature2-padding); /* Keep consistent top padding */
}

/* BLOG and MAGAZINE PAGE TYPES - align nav position with index/literature2 */
body.blog .layout-wrapper,
body.magazine .layout-wrapper {
  max-width: none;
  margin: 0;
  padding: 1.5em 0 30px 20px; /* Consistent left offset for nav */
}

body.literature2 .prose {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', 'Arial', sans-serif;
  font-size: var(--literature2-font-size);
  line-height: var(--literature2-line-height);
  color: var(--literature2-text-color);
  max-width: var(--literature2-max-width);
  text-align: left;
  letter-spacing: -0.003em;
  margin: 0;
  font-weight: 400;
}

body.literature2 .prose p {
  margin: 0 !important;
  margin-bottom: 0 !important;
  padding: 0 !important;
  font-size: var(--literature2-font-size);
  line-height: var(--literature2-line-height);
  hanging-punctuation: first last;
}

/* Add paragraph spacing only for actual paragraph breaks */
body.literature2 .prose p + p {
  margin-top: var(--literature2-paragraph-spacing) !important;
}

/* Remove margin when previous paragraph ends with breaks - for exact newline preservation */
body.literature2 .prose p:has(br:last-child) + p {
  margin-top: 0 !important;
}

/* Override first paragraph styles */
body.literature2 .prose p:first-of-type,
body.literature2 .prose p:first-child {
  margin: 0 !important;
  margin-bottom: 0 !important;
}

/* Make empty paragraphs visible */
body.literature2 .prose p:empty {
  height: var(--literature2-line-height);
  margin: 0;
}

body.literature2 .prose p:empty::before {
  content: '\00a0';
  line-height: inherit;
}

/* No extra spacing for br tags */
body.literature2 .prose br,
body.literature2 .prose p br {
  margin: 0 !important;
  padding: 0 !important;
  line-height: 0 !important;
  height: 0 !important;
  display: block !important;
}

/* Title styling */
body.literature2 .prose h1 {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', 'Arial', sans-serif;
  font-weight: 500;
  font-size: 18px;
  line-height: 1.2;
  color: var(--literature2-text-color);
  margin: 0 0 8px 0;
  text-align: left;
  letter-spacing: 0;
}

/* Subtitle/date styling */
body.literature2 .prose .subtitle,
body.literature2 time {
  display: block;
  text-align: left;
  font-size: 12px;
  color: #666;
  margin-bottom: 16px;
  font-style: normal;
}

/* Section headings */
body.literature2 .prose h2 {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', 'Arial', sans-serif;
  font-weight: 500;
  font-size: 16px;
  line-height: 1.3;
  color: var(--literature2-text-color);
  margin: 1.5em 0 0.2em 0;
  letter-spacing: 0;
}

body.literature2 .prose h3,
body.literature2 .prose h4,
body.literature2 .prose h5,
body.literature2 .prose h6 {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', 'Arial', sans-serif;
  font-weight: 500;
  font-size: 15px;
  line-height: 1.3;
  color: var(--literature2-text-color);
  margin: 1.2em 0 0.2em 0;
  letter-spacing: 0;
}

/* Links */
body.literature2 .prose a {
  color: #0066cc;
  text-decoration: none;
  border-bottom: 1px solid #0066cc;
}

body.literature2 .prose a:hover {
  color: #0052a3;
  border-bottom-color: #0052a3;
}

/* Code styling */
body.literature2 .prose code {
  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
  font-size: 0.9em;
  background: #f5f5f5;
  padding: 2px 4px;
  border-radius: 3px;
}

/* Blockquote styling */
body.literature2 .prose blockquote {
  margin: 1em 0;
  padding-left: 1em;
  border-left: 3px solid #e0e0e0;
  color: #666;
  font-style: italic;
}

/* Lists */
body.literature2 .prose ul,
body.literature2 .prose ol {
  margin: 0.4em 0 0.8em; /* Reduced top margin */
  padding-left: 1.2em;
}

/* Reduce spacing when lists follow headings in literature2 */
body.literature2 .prose h1 + ul,
body.literature2 .prose h2 + ul,
body.literature2 .prose h3 + ul,
body.literature2 .prose h4 + ul,
body.literature2 .prose h5 + ul,
body.literature2 .prose h6 + ul,
body.literature2 .prose h1 + ol,
body.literature2 .prose h2 + ol,
body.literature2 .prose h3 + ol,
body.literature2 .prose h4 + ol,
body.literature2 .prose h5 + ol,
body.literature2 .prose h6 + ol {
  margin-top: 0.2em;
}

body.literature2 .prose li {
  margin-bottom: 0.2em;
}

/* Further reduce top margin when lists follow paragraphs in literature2 */
/* Spacing for paragraphs followed by lists in literature2 */
body.literature2 .prose p + ul,
body.literature2 .prose p + ol,
body.literature2 .prose p + ul.contains-task-list,
body.literature2 .prose p + ol.contains-task-list {
  margin-top: 0.4em !important;
  padding-top: 0 !important;
}

/* Back to blog button */
body.literature2 .back-to-blog {
  display: inline-block;
  color: #0066cc;
  text-decoration: none;
  font-size: 14px;
  margin-bottom: 1em;
  padding: 4px 0;
  border-bottom: 1px solid transparent;
}

body.literature2 .back-to-blog:hover {
  border-bottom-color: #0066cc;
}

/* Horizontal rule - subtle separator */
body.literature .prose hr {
  display: block !important;
  border: none !important;
  border-top: 1px solid rgba(0,0,0,0.15) !important;
  margin: 1.25em auto !important;
  width: 60% !important;
  height: 0 !important;
}

/* Selection color */
body.literature ::selection {
  background: rgba(0, 100, 200, 0.15);
}

/* Responsive adjustments */
@media (max-width: 768px) {
  :root {
    --literature-font-size: 13px;
    --literature-padding: 15px;
  }
  
  body.literature .layout-wrapper {
    padding: 1.5em 0 30px var(--literature-padding); /* Keep consistent top padding with standard layout */
  }
  
  body.literature .prose h1 {
    font-size: 16px;
  }
  
  body.literature .prose h2 {
    font-size: 14px;
  }

  /* Slightly increase line-height on small screens for comfort */
  body.literature .prose { line-height: calc(var(--literature-line-height) + 0.08); }
}

/* Print styles */
@media print {
  body.literature {
    background: white;
    color: black;
  }
  
  body.literature .prose {
    font-size: 12pt;
    line-height: 1.5;
  }
  
  body.literature .style-editor {
    display: none !important;
  }
}

/* LITERATURE3 PAGE TYPE - Similar to literature but with different line height and padding */
:root {
  --literature3-font-size: 14px;
  --literature3-line-height: 1.1;
  --literature3-max-width: 480px;
  --literature3-padding: 25px;
  --literature3-paragraph-spacing: 0.5em;
  --literature3-text-color: #000000;
  --literature3-bg-color: #ffffff;
}

body.literature3 {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', 'Arial', sans-serif;
  background: var(--literature3-bg-color);
  color: var(--literature3-text-color);
  /* Font smoothing removed for cross-platform consistency */
  text-rendering: optimizeLegibility;
}

body.literature3 .layout-wrapper {
  max-width: none;
  margin: 0;
  padding: 1.5em 0 30px 20px; /* Align nav offset with index/literature2 */
}

body.literature3 .prose {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', 'Arial', sans-serif;
  font-size: var(--literature3-font-size);
  line-height: var(--literature3-line-height);
  color: var(--literature3-text-color);
  max-width: var(--literature3-max-width);
  text-align: left;
  letter-spacing: -0.003em;
  margin: 0;
  font-weight: 400;
  white-space: pre-line; /* Also preserve line breaks at prose level */
}

body.literature3 .prose p {
  margin: 0 !important; /* Override default .prose p margins */
  margin-bottom: 0 !important; /* Specifically override margin-bottom */
  padding: 0 !important;
  font-size: var(--literature3-font-size);
  line-height: var(--literature3-line-height);
  hanging-punctuation: first last;
}

/* Add paragraph spacing in literature3 pages */
body.literature3 .prose p + p {
  margin-top: var(--literature3-paragraph-spacing) !important;
}

/* Override first paragraph styles too */
body.literature3 .prose p:first-of-type,
body.literature3 .prose p:first-child {
  margin: 0 !important;
  margin-bottom: 0 !important;
}

/* Make empty paragraphs visible to preserve multiple line breaks */
body.literature3 .prose p:empty {
  height: var(--literature3-line-height);
  margin: 0;
}

/* Ensure empty paragraphs have content for proper height */
body.literature3 .prose p:empty::before {
  content: '\00a0'; /* non-breaking space */
  line-height: inherit;
}

/* No extra spacing for br tags - just a line break */
body.literature3 .prose br,
body.literature3 .prose p br {
  margin: 0 !important;
  padding: 0 !important;
  line-height: 0 !important;
  height: 0 !important;
  display: block !important;
}

/* Title styling - left-aligned */
body.literature3 .prose h1 {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', 'Arial', sans-serif;
  font-weight: 500;
  font-size: 24px;
  line-height: 1.2;
  color: var(--literature3-text-color);
  margin: 0 0 8px 0;
  text-align: left;
  letter-spacing: 0;
  position: relative;
}

/* Heading hash indicators with size variation */
body.literature3 .prose h1::before {
  content: '#';
  position: absolute;
  left: -30px;
  top: 50%;
  transform: translateY(-50%);
  color: #999;
  font-weight: 400;
  font-size: 18px;
  line-height: 1;
  transition: font-weight 0.2s ease, color 0.2s ease, font-size 0.2s ease;
  cursor: pointer;
  padding: 0 5px;
}

body.literature3 .prose h2::before {
  content: '#';
  position: absolute;
  left: -30px;
  top: 50%;
  transform: translateY(-50%);
  color: #999;
  font-weight: 400;
  font-size: 16px;
  line-height: 1;
  transition: font-weight 0.2s ease, color 0.2s ease, font-size 0.2s ease;
  cursor: pointer;
  padding: 0 5px;
}

body.literature3 .prose h3::before {
  content: '#';
  position: absolute;
  left: -30px;
  top: 50%;
  transform: translateY(-50%);
  color: #999;
  font-weight: 400;
  font-size: 14px;
  line-height: 1;
  transition: font-weight 0.2s ease, color 0.2s ease, font-size 0.2s ease;
  cursor: pointer;
  padding: 0 5px;
}

body.literature3 .prose h4::before {
  content: '#';
  position: absolute;
  left: -30px;
  top: 50%;
  transform: translateY(-50%);
  color: #999;
  font-weight: 400;
  font-size: 12px;
  line-height: 1;
  transition: font-weight 0.2s ease, color 0.2s ease, font-size 0.2s ease;
  cursor: pointer;
  padding: 0 5px;
}

body.literature3 .prose h5::before {
  content: '#';
  position: absolute;
  left: -30px;
  top: 50%;
  transform: translateY(-50%);
  color: #999;
  font-weight: 400;
  font-size: 11px;
  line-height: 1;
  transition: font-weight 0.2s ease, color 0.2s ease, font-size 0.2s ease;
  cursor: pointer;
  padding: 0 5px;
}

body.literature3 .prose h6::before {
  content: '#';
  position: absolute;
  left: -30px;
  top: 50%;
  transform: translateY(-50%);
  color: #999;
  font-weight: 400;
  font-size: 10px;
  line-height: 1;
  transition: font-weight 0.2s ease, color 0.2s ease, font-size 0.2s ease;
  cursor: pointer;
  padding: 0 5px;
}

/* Blue on hover */
body.literature3 .prose h1:hover::before,
body.literature3 .prose h2:hover::before,
body.literature3 .prose h3:hover::before,
body.literature3 .prose h4:hover::before,
body.literature3 .prose h5:hover::before,
body.literature3 .prose h6:hover::before {
  color: #6b8ec5;
}


/* Bold hash when heading has :target (scrolled to via anchor link) */
body.literature3 .prose h1:target::before,
body.literature3 .prose h2:target::before,
body.literature3 .prose h3:target::before,
body.literature3 .prose h4:target::before,
body.literature3 .prose h5:target::before,
body.literature3 .prose h6:target::before {
  font-weight: 700;
  color: #4a70a8;
}

/* Grey hash for active heading (current scroll position) - no color change */
body.literature3 .prose h1.active-heading::before,
body.literature3 .prose h2.active-heading::before,
body.literature3 .prose h3.active-heading::before,
body.literature3 .prose h4.active-heading::before,
body.literature3 .prose h5.active-heading::before,
body.literature3 .prose h6.active-heading::before {
  color: #999;
}

/* Subtitle/date styling */
body.literature3 .prose .subtitle,
body.literature3 time {
  display: block;
  text-align: left;
  font-size: 12px;
  color: #666;
  margin-bottom: 16px;
  font-style: normal;
}

/* Section headings */
body.literature3 .prose h2 {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', 'Arial', sans-serif;
  font-weight: 500;
  font-size: 20px;
  line-height: 1.3;
  color: var(--literature3-text-color);
  margin: 1.5em 0 0.5em 0;
  letter-spacing: 0;
  position: relative;
}

body.literature3 .prose h3,
body.literature3 .prose h4,
body.literature3 .prose h5,
body.literature3 .prose h6 {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', 'Arial', sans-serif;
  font-weight: 500;
  font-size: 18px;
  line-height: 1.3;
  color: var(--literature3-text-color);
  margin: 1.2em 0 0.4em 0;
  position: relative;
}

/* Links - minimal like literature.bio */
body.literature3 .prose a {
  color: #0000EE;
  text-decoration: none;
}

body.literature3 .prose a:hover {
  text-decoration: underline;
}

/* Back to blog button */
body.literature3 .back-to-blog {
  display: inline-block;
  margin-bottom: 24px;
  color: #0066cc;
  font-size: 14px;
  text-decoration: none;
  transition: color 0.2s ease;
}

body.literature3 .back-to-blog:hover {
  color: #0052a3;
  text-decoration: none;
}

/* Hide unnecessary elements for literature3 style */
body.literature3 .sidenotes-area,
body.literature3 #toggle-compact,
body.literature3 .reading-mode-toggle {
  display: none !important;
}

body.literature3 .main-content-area {
  margin: 0;
  padding: 0;
  max-width: none;
}

body.literature3 main {
  margin: 0;
  padding: 0;
}

/* Code styling - minimal and clean */
body.literature3 .prose code {
  font-family: 'SF Mono', Monaco, 'Inconsolata', 'Fira Code', monospace;
  font-size: 0.85em;
  background: #f5f5f5;
  padding: 0.2em 0.4em;
  border-radius: 3px;
}

body.literature3 .prose pre {
  font-family: 'SF Mono', Monaco, 'Inconsolata', 'Fira Code', monospace;
  font-size: 0.85em;
  background: #f8f8f8;
  border: 1px solid #e8e8e8;
  border-radius: 4px;
  padding: 1.5em;
  overflow-x: auto;
  margin: 2em 0;
}

body.literature3 .prose pre code {
  background: none;
  padding: 0;
}

/* Blockquotes - minimal */
body.literature3 .prose blockquote {
  border-left: 2px solid #ccc;
  margin: 1em 0;
  padding: 0 0 0 1em;
  font-style: normal;
  color: var(--literature3-text-color);
}

/* Lists - compact */
body.literature3 .prose ul,
body.literature3 .prose ol {
  margin: 0.8em 0;
  padding-left: 1.2em;
}

body.literature3 .prose li {
  margin-bottom: 0.2em;
}

/* Hide unnecessary elements for literature3 style */
body.literature3 .sidebar,
body.literature3 .sidenotes-area,
body.literature3 #toggle-compact,
body.literature3 .reading-mode-toggle {
  display: none !important;
}

/* Horizontal rule - subtle separator */
body.literature3 .prose hr {
  display: block !important;
  border: none !important;
  border-top: 1px solid #333 !important;
  margin: 1.5em 0 !important;
  width: 100% !important;
  height: 0 !important;
}

/* Selection color */
body.literature3 ::selection {
  background: rgba(0, 100, 200, 0.15);
}

/* Responsive adjustments */
@media (max-width: 768px) {
  :root {
    --literature3-font-size: 13px;
    --literature3-padding: 15px;
  }
  
  body.literature3 .layout-wrapper {
    padding: 1.5em 0 30px var(--literature3-padding); /* Keep consistent top padding with standard layout */
  }
  
  body.literature3 .prose h1 {
    font-size: 16px;
  }
  
  body.literature3 .prose h2 {
    font-size: 14px;
  }
}

/* Print styles */
@media print {
  body.literature3 {
    background: white;
    color: black;
  }
  
  body.literature3 .prose {
    font-size: 12pt;
    line-height: 1.5;
  }
  
  body.literature3 .style-editor {
    display: none !important;
  }
}

/* NOTEPAD PAGE TYPE - Obsidian-style note-taking */
:root {
  --notepad-font-size: 16px;
  --notepad-line-height: 1.6;
  --notepad-max-width: 700px;
  --notepad-bg: #fafafa;
  --notepad-text: #333;
  --notepad-accent: #ff8c00; /* Orange */
  --notepad-tint: rgba(255, 140, 0, 0.05);
}

/* Notepad page layout - Apache index style */
body.notepad {
  font-family: 'SF Mono', Menlo, Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
  font-weight: 400;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: var(--body-background);
  color: var(--body-font-color);
}

/* Hide sidebar on notepad page for more space */
body.notepad .sidebar {
  display: none;
}

body.notepad .layout-wrapper {
  display: block;
  max-width: none;
  padding: 1em;
}

body.notepad .main-content-area {
  max-width: 100%;
  margin: 0;
  padding: 0 1em;
}

body.notepad main {
  padding: 0;
  margin: 0;
}

/* Password Page Deep Blue Theme */
.protected-content {
  width: 100%;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #002147;
  position: fixed;
  top: 0;
  left: 0;
  z-index: 9999;
}

body:has(.protected-content) {
  background-color: #002147;
  overflow: hidden;
}

.protected-content .centered-form {
  text-align: center;
  background: rgba(255, 255, 255, 0.05);
  padding: 30px 40px;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.protected-content .pw-form {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0.75em;
  margin-bottom: 0.5em;
}

.protected-content .back-link {
  font-size: 1.2em;
  text-decoration: none;
  color: rgba(255, 255, 255, 0.9);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
  display: flex;
  align-items: center;
  gap: 4px;
  transition: color 0.2s;
}

.protected-content .back-link:hover {
  color: #ffffff;
}

.protected-content input[type="password"] {
  font-size: 0.9em;
  padding: 6px 10px;
  border: 1px solid rgba(255, 255, 255, 0.3);
  background: rgba(255, 255, 255, 0.1);
  color: #ffffff;
  width: 180px;
  transition: border-color 0.2s, background-color 0.2s;
}

.protected-content input[type="password"]:focus {
  outline: none;
  border-color: rgba(255, 255, 255, 0.6);
  background: rgba(255, 255, 255, 0.15);
}

.protected-content input[type="password"]::placeholder {
  color: rgba(255, 255, 255, 0.5);
}

.protected-content .error-message {
  margin: 0;
  color: #ff9999;
  font-size: 0.85em;
}
